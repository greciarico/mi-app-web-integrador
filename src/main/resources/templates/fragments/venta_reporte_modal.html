<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="reporteModalContent">
    <div class="modal-header">
        <h4 class="modal-title">Generar Reporte de Ventas</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="cerrarReporteVentasModal()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form id="formReporteVentas">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="filtroNombreCliente">Nombre/Razón Social Cliente:</label>
                        <input type="text" id="filtroNombreCliente" name="nombreCliente" class="form-control" placeholder="Nombre o Razón Social"/>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="filtroIdCliente">Cliente Específico:</label>
                        <select id="filtroIdCliente" name="idCliente" class="form-control select2bs4" style="width: 100%;">
                            <option value="">Todos los Clientes</option>
                            <option th:each="cli : ${clientes}"
                                    th:value="${cli.idCliente}"
                                    th:text="${(cli.razonSocial != null and cli.razonSocial.trim() != '') ? cli.razonSocial : (cli.nombre + ' ' + cli.apPaterno + ' ' + cli.apMaterno)}">
                            </option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="filtroIdUsuario">Vendedor (Usuario):</label>
                        <select id="filtroIdUsuario" name="idUsuario" class="form-control select2bs4" style="width: 100%;">
                            <option value="">Todos los Vendedores</option>
                            <option th:each="user : ${usuarios}" th:value="${user.idUsuario}" th:text="${user.nombre}"></option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="filtroTipoDocumento">Tipo Documento:</label>
                        <select id="filtroTipoDocumento" name="tipoDocumento" class="form-control">
                            <option value="">Todos los Tipos</option>
                            <option value="Factura">Factura</option>
                            <option value="Boleta">Boleta</option>
                            <option value="Ticket">Ticket</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="filtroNumDocumento">N° Documento:</label>
                        <input type="text" id="filtroNumDocumento" name="numDocumento" class="form-control" placeholder="Número de Documento"/>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="filtroTipoPago">Tipo de Pago:</label>
                        <select id="filtroTipoPago" name="tipoPago" class="form-control">
                            <option value="">Todos los Tipos</option>
                            <option value="Efectivo">Efectivo</option>
                            <option value="Tarjeta">Tarjeta</option>
                            <option value="Transferencia">Transferencia</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Estado de la Venta:</label><br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input estado-checkbox-venta" type="checkbox" id="estadoActivaVenta" name="estados" value="1">
                            <label class="form-check-label" for="estadoActivaVenta">Activa</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input estado-checkbox-venta" type="checkbox" id="estadoCanceladaVenta" name="estados" value="0">
                            <label class="form-check-label" for="estadoCanceladaVenta">Cancelada</label>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Rango de Fechas de Registro:</label>
                        <div class="input-group">
                            <input type="date" id="fechaRegistroVentaStart" name="fechaRegistroStart" class="form-control" onchange="setReportDateRangeVenta()">
                            <input type="date" id="fechaRegistroVentaEnd" name="fechaRegistroEnd" class="form-control" onchange="setReportDateRangeVenta()">
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Rango de Total de Venta:</label>
                        <div class="input-group">
                            <input type="number" step="0.01" id="totalVentaMin" name="totalMin" class="form-control" placeholder="Mínimo">
                            <input type="number" step="0.01" id="totalVentaMax" name="totalMax" class="form-control" placeholder="Máximo">
                        </div>
                    </div>
                </div>
            </div>

            <div class="alert alert-info text-center mt-3" role="alert">
                <i class="fas fa-info-circle"></i> Deje todas las opciones de filtro sin marcar para generar un reporte de todas las ventas activas.
            </div>
        </form>
    </div>
    <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-default" onclick="limpiarFiltrosReporteVentas()">Limpiar Filtros</button>
        <button type="button" class="btn btn-primary" id="btnGenerarPdfVenta" style="background-color:#183D00 !important; border-color:#183D00 !important;" onclick="ejecutarGenerarReporteVentas()">
            <i class="fas fa-file-pdf"></i> Generar PDF
        </button>
    </div>
</div>
</body>
</html>
