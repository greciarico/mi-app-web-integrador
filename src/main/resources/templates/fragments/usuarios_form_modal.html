<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="formContent">
    <div class="modal-header">
        <h4 class="modal-title" th:text="${usuario.idUsuario} == null ? 'Crear Usuario' : 'Editar Usuario'"></h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="cerrarFormulario()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <form id="formUsuario" th:action="@{/usuarios/guardar}" th:object="${usuario}" method="post">
        <div class="modal-body">
            <input type="hidden" th:field="*{idUsuario}"/>
            <input type="hidden" th:field="*{fechaRegistro}" th:if="${usuario.idUsuario != null}"/>

            <div class="form-group">
                <label for="nombre">Nombre:</label>
                <input type="text" id="nombre" th:field="*{nombre}" placeholder="Nombre Usuario" required class="form-control"/>
                <small id="nombreError" class="text-danger"></small>
            </div>

            <div class="form-group">
                <label for="apPaterno">Apellido Paterno:</label>
                <input type="text" id="apPaterno" th:field="*{apPaterno}" placeholder="Apellido Paterno Usuario" required class="form-control"/>
                <small id="apPaternoError" class="text-danger"></small>
            </div>

            <div class="form-group">
                <label for="apMaterno">Apellido Materno:</label>
                <input type="text" id="apMaterno" th:field="*{apMaterno}" placeholder="Apellido Materno Usuario" required class="form-control"/>
                <small id="apMaternoError" class="text-danger"></small>
            </div>

            <div class="form-group">
                <label for="telefono">Celular:</label>
                <input type="number" id="telefono" th:field="*{telefono}" placeholder="Numero Celular" required class="form-control"/>
                <small id="telefonoError" class="text-danger"></small>
            </div>

            <div class="form-group">
                <label for="dni">DNI:</label>
                <input type="number" id="dni" th:field="*{dni}" placeholder="Acceso de Usuario" required class="form-control"/>
                <small id="dniError" class="text-danger"></small>
            </div>

            <div class="form-group">
                <label for="correo">Correo:</label>
                <input type="email" id="correo" th:field="*{correo}" placeholder="Correo Electronico(Opcional)" class="form-control"/>
                <small id="correoError" class="text-danger"></small>
            </div>

            <div class="form-group">
                <label for="contrasena">Contrase침a:</label>
                <input type="password" id="contrasena"
                       th:field="*{contrasena}"
                       th:required="${usuario.idUsuario == null}"
                       placeholder="Contrase침a de Usuario"
                       class="form-control"/>

                <!-- Mensaje si es edici칩n -->
                <small class="text-muted" th:if="${usuario.idUsuario != null}">Dejar en blanco para mantener la contrase침a actual.</small>

                <!-- Mensaje de error / validaci칩n -->
                <small id="contrasenaError" class="text-danger"></small>
                <small id="contrasenaValidation" class="text-danger" th:if="${usuario.idUsuario == null}"></small>

                <!-- Requisitos visibles -->
                <ul id="contrasenaRequisitos" class="text-muted small pl-3">
                    <li id="reqLongitud">游댲 Al menos 8 caracteres</li>
                    <li id="reqMayuscula">游댲 Una letra may칰scula</li>
                    <li id="reqEspecial">游댲 Un car치cter especial</li>
                </ul>
            </div>


            <div class="form-group">
                <label for="estado">Estado:</label>
                <select id="estado" th:field="*{estado}" class="form-control">
                    <option value="1" th:selected="${usuario.estado == 1}">Activo</option>
                    <option value="0" th:selected="${usuario.estado == 0}">Inactivo</option>
                </select>
            </div>

            <div class="form-group">
                <label for="rolSelect">Rol</label>
                <select id="rolSelect"
                        th:field="*{rolUsuario.idRol}"
                        class="form-control"
                        required>
                    <option value="" disabled
                            th:if="${usuario.rolUsuario == null}"
                            selected>-- Selecciona un rol --</option>
                    <option th:each="rol : ${todosRoles}"
                            th:value="${rol.idRol}"
                            th:text="${rol.tipoRol}"
                            th:selected="${usuario.rolUsuario != null} ?
                         (rol.idRol == usuario.rolUsuario.idRol) : false">
                    </option>
                </select>
            </div>

        </div>
        <div class="modal-footer justify-content-between">
            <button type="button" class="btn btn-default" onclick="cerrarFormulario()">Cerrar</button>
            <button type="submit" class="btn btn-success">Guardar</button>
        </div>
    </form>
</div>
</body>
</html>
